<div *ngIf="loading">Loading game data...</div>
<div *ngIf="error" style="color: red">{{ error }}</div>
<form
  *ngIf="!loading && !error"
  [formGroup]="gameForm"
  (ngSubmit)="onSubmit()"
  novalidate
>
  <div>
    <label for="title">Title</label>
    <input id="title" formControlName="title" required />
    <div
      *ngIf="gameForm.get('title')?.invalid && gameForm.get('title')?.touched"
      class="validation-error"
    >
      Title is required.
    </div>
  </div>

  <div>
    <label for="releaseYear">Release Year</label>
    <input
      id="releaseYear"
      formControlName="releaseYear"
      inputmode="numeric"
      pattern="[0-9]*"
    />
    <div
      *ngIf="gameForm.get('releaseYear')?.invalid && gameForm.get('releaseYear')?.touched"
      class="validation-error"
    >
      Release year must be a number (digits only).
    </div>
  </div>

  <div>
    <label for="labelCode">Label Code</label>
    <input id="labelCode" formControlName="labelCode" />
  </div>

  <div>
    <label for="region">Region</label>
    <input id="region" formControlName="region" />
  </div>

  <div>
    <label for="gameConsoleId">Game Console</label>
    <select id="gameConsoleId" formControlName="gameConsoleId" required>
      <option value="">Select a console</option>
      <option *ngFor="let console of gameConsoles" [value]="console.id">{{ console.name }}</option>
    </select>
    <div
      *ngIf="gameForm.get('gameConsoleId')?.invalid && gameForm.get('gameConsoleId')?.touched"
      class="validation-error"
    >
      Game console is required.
    </div>
  </div>

  <button type="submit" [disabled]="submitting">Update Game</button>

  <div *ngIf="success" class="status-message" style="color: green">
    {{ success }}
  </div>
  <div *ngIf="error && !loading" class="status-message" style="color: red">
    {{ error }}
  </div>
</form>
